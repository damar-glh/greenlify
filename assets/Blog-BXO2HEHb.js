import{r as t,j as e,T as l,A as K,h as G,i as Q,S as c,g as P,B as Y,L as E}from"./index-Bjp6i5Kc.js";import{g as z}from"./blog-BEoleNV9.js";import{C as _,a as R,b as L,c as B,d as A}from"./card-Dd2CSfRw.js";import{B as H}from"./badge-CKwAAYzL.js";import{b as W}from"./index-Cz0sGFKe.js";import{P as q,a as V,b as S,c as X,d as Z,e as ee}from"./pagination-DvMurIFt.js";import{u as ae}from"./useDateStore-KkonUMz-.js";const se=o=>{const n=new Date(o),i=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],u=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],r=i[n.getDay()],g=n.getDate(),x=u[n.getMonth()],h=n.getFullYear();return`${r}, ${g} ${x} ${h}`},te=({content:o,created_at:n,created_by:i,img_file:u,title:r,views:g})=>{const[x,h]=t.useState("");return t.useEffect(()=>{const p=["bg-emerald-500","bg-emerald-400","bg-emerald-600","bg-slate-500","bg-slate-400","bg-slate-600"];h(p[Math.floor(Math.random()*p.length)])},[]),e.jsxs(_,{className:"flex flex-col h-full",children:[e.jsx("div",{className:"rounded-md overflow-hidden hover:shadow-lg",children:e.jsx(W.LazyLoadImage,{src:u,alt:r,className:"w-full h-96 object-cover"})}),e.jsxs(R,{className:"space-y-4 flex-grow",children:[e.jsxs(H,{variant:"outline",className:"bg-background text-emerald-600 border-2 border-emerald-600 max-w-max px-2 py-1 rounded-full",children:[g," pemirsa"]}),e.jsx(l,{variant:"h2",className:"text-emerald-600 font-bold",children:r})]}),e.jsx(L,{className:"flex-grow",children:e.jsx(B,{children:e.jsx(l,{variant:"p",type:"description",className:"text-justify",children:o.replace(/<[^>]*>/g,"").split(".")[0]+"."})})}),e.jsxs(A,{className:"flex flex-col lg:flex-row items-start lg:items-center gap-4 text-emerald-600 mt-auto",children:[e.jsxs("div",{className:"flex items-start md:items-center",children:[e.jsxs(K,{className:`cursor-pointer ${x} text-white shadow-md hidden lg:block`,children:[e.jsx(G,{src:"",alt:"User avatar"}),e.jsx(Q,{children:i.charAt(0).toUpperCase()})]}),e.jsx(l,{variant:"p-semibold",className:"text-emerald-600 ml-0 lg:ml-4",children:i})]}),e.jsx("strong",{className:"hidden lg:block",children:"●"}),e.jsx(l,{variant:"p-semibold",className:"text-emerald-600",children:se(n)})]})]})},re=()=>e.jsx("div",{className:"rounded-lg",children:e.jsx(c,{className:"w-full h-[700px] object-cover"})}),le=()=>e.jsxs(_,{children:[e.jsx("div",{className:"rounded-md",children:e.jsx(c,{className:"w-full h-96 object-cover"})}),e.jsxs(R,{className:"space-y-4",children:[e.jsx(c,{className:"max-w-max px-2 py-1 rounded-full"}),e.jsx(c,{className:"w-3/4 h-8"})]}),e.jsx(L,{children:e.jsx(B,{children:e.jsx(c,{className:"w-full h-6"})})}),e.jsxs(A,{className:"flex flex-col lg:flex-row items-start lg:items-center gap-4 text-emerald-600",children:[e.jsxs("div",{className:"flex items-start md:items-center",children:[e.jsx(c,{className:"w-10 h-10 rounded-full"}),e.jsx(c,{className:"ml-4 w-24 h-6"})]}),e.jsx(c,{className:"w-5 h-5 rounded-full hidden lg:block"}),e.jsx(c,{className:"w-32 h-6"})]})]});function ne({count:o}){return e.jsx(e.Fragment,{children:Array.from({length:o}).map((n,i)=>e.jsx(le,{},i))})}const ge=()=>{const o=t.useRef(null),n=t.useRef(null),i=new URLSearchParams(window.location.search),{formatDate:u}=ae(),[r,g]=t.useState([]),[x,h]=t.useState([]),[p,b]=t.useState(i.get("keyword")||""),[d,D]=t.useState(i.get("keyword")||""),T=2e3,[f,j]=t.useState(null),[m,w]=t.useState(parseInt(i.get("page"))||1),[N,U]=t.useState({next:null,previous:null,per_page:6,total_data:0}),[v,I]=t.useState(1),[F,y]=t.useState(!0);t.useEffect(()=>{(async()=>{try{y(!0),j(null);const s=await z({keyword:p,page:m,limit:N.per_page});g(s.latest_article[0]),h(s.articles),U(s.pagination);const J=Math.ceil(s.pagination.total_data/s.pagination.per_page);I(J||1),y(!1)}catch(s){s.message.includes("Kegagalan dalam mengambil data dari server")?j("ERR_CONNECTION_REFUSED"):j(s.message)}finally{y(!1)}})().catch(console.error)},[p,m]),t.useEffect(()=>{const a=setTimeout(()=>{b(d.trim()),w(1);const s=new URL(window.location.href);d.trim()===""?s.searchParams.delete("keyword"):s.searchParams.set("keyword",d.trim()),s.searchParams.set("page",1),window.history.pushState(null,"",s.toString())},T);return()=>clearTimeout(a)},[d]),t.useEffect(()=>{const a=()=>{const s=new URLSearchParams(window.location.search);b(s.get("keyword")||""),w(parseInt(s.get("page"))||1)};return window.addEventListener("popstate",a),()=>window.removeEventListener("popstate",a)},[]),t.useEffect(()=>{o.current&&P.fromTo(o.current.children,{opacity:0,y:20},{opacity:1,y:0,duration:1,stagger:.5}),n.current&&P.fromTo(n.current,{opacity:0,y:20},{opacity:1,y:0,duration:.6})},[x,f]);const C=()=>{j(null),w(1),b(d);const a=new URL(window.location.href);d.trim()===""?a.searchParams.delete("keyword"):a.searchParams.set("keyword",d.trim()),a.searchParams.set("page",1),window.history.pushState(null,"",a.toString())},M=a=>{a.key==="Enter"&&C()},k=a=>{if(a<1||a>v)return;w(a);const s=new URL(window.location.href);s.searchParams.set("page",a),window.history.pushState(null,"",s.toString())},O=()=>{var a;return f==="ERR_CONNECTION_REFUSED"?e.jsx(re,{}):e.jsx("div",{className:"hover:shadow-lg transition-shadow rounded-lg overflow-hidden",children:e.jsx(E,{to:`/blog/${r.id}`,className:"block",children:e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:r.img_file,alt:r.title,className:"w-full h-[700px] object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-90"}),e.jsxs("div",{className:"absolute bottom-40 md:bottom-36 lg:bottom-24 mx-8 text-white max-w-4xl",children:[e.jsx(l,{variant:"title",className:"text-background text-4xl md:text-5xl lg:text-6xl font-bold mb-4",children:r.title}),e.jsx(l,{variant:"p",className:"text-background",children:((a=r==null?void 0:r.content)==null?void 0:a.replace(/<[^>]*>/g,"").split(".").slice(0,1).join("."))+"."})]}),e.jsx("div",{className:"absolute bottom-10 left-8 text-white w-10/12",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center mt-4 gap-2 md:gap-5",children:[e.jsx(l,{variant:"p-semibold",className:"text-background",children:r.created_by}),e.jsx("strong",{className:"hidden md:block",children:"●"}),e.jsx(l,{variant:"p-semibold",className:"text-background",children:u(r.created_at)}),e.jsx("strong",{className:"hidden md:block",children:"●"}),e.jsxs(l,{variant:"p-semibold",className:"text-background",children:[r.views," Dibaca"]})]})})]})})})},$=()=>F?e.jsx("div",{className:"col-span-full flex flex-col items-center justify-center w-full p-8",ref:n,children:e.jsx(l,{variant:"h2",className:"text-emerald-600 text-center mb-4",children:"Memuat Produk..."})}):f?f==="ERR_CONNECTION_REFUSED"?e.jsx(ne,{count:6}):e.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center w-full p-8 mt-[33px]",ref:n,children:[e.jsx(l,{variant:"h2",className:"text-emerald-600 text-center mb-4",children:"Blog Tidak Ditemukan"}),e.jsx(l,{variant:"large",className:"text-slate-500 text-center mb-6",children:"Tidak ada postingan blog yang sesuai dengan pencarian Anda."})]}):x.map(a=>e.jsx("div",{ref:o,children:e.jsx(E,{to:`/blog/${a.id}`,children:e.jsx(te,{created_by:a.created_by,content:a.content,created_at:a.created_at,img_file:a.img_file,title:a.title,views:a.views},a.id)})},a.id));return e.jsx("main",{children:e.jsxs("div",{className:"w-full mt-[99px] h-auto flex flex-col items-center gap-[33px]",children:[r&&e.jsx("section",{className:"w-10/12 px-0 md:px-4 py-12 ",children:O()}),e.jsx("div",{className:"max-w-sm md:max-w-xl text-center lg:text-left",children:e.jsxs(l,{variant:"title",children:[e.jsx("strong",{className:"text-emerald-700",children:"Blog"})," Greenlify"]})}),e.jsx("div",{className:"mx-auto md:max-w-5xl lg:max-w-6xl p-4 lg:p-0 text-justify lg:text-center",children:e.jsx(l,{variant:"p",className:"px-4 md:px-0",children:"Blog Greenlify menyajikan informasi terkini seputar isu lingkungan, inovasi teknologi hijau, dan solusi berkelanjutan. Dengan fokus pada edukasi dan inspirasi, article ini bertujuan meningkatkan kesadaran masyarakat terhadap pentingnya menjaga bumi. Beragam artikel menarik dihadirkan untuk memotivasi pembaca mengambil langkah kecil menuju perubahan besar."})}),e.jsxs("div",{className:"w-10/12 max-w-4xl flex items-center gap-2",children:[e.jsx("input",{type:"text",placeholder:"Cari postingan blog...",value:d,onChange:a=>D(a.target.value),onKeyPress:M,className:"flex-grow text-slate-900 border-2 border-slate-50 rounded-lg p-2 focus:outline-none focus:border-slate-100"}),e.jsx(Y,{variant:"primary",className:"w-auto px-4 py-2 text-sm",onClick:C,children:"Cari"})]}),e.jsxs("section",{className:"w-10/12 mx-auto px-4 pt-12",children:[e.jsx(l,{variant:"h2",className:"mb-6 text-emerald-600",children:"Postingan Blog"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 auto-rows-[1fr]",children:$()})]}),N.total_data>N.per_page&&e.jsx("div",{className:"w-10/12 mt-8 sm:mt-[33px]",children:e.jsxs(q,{className:"gap-5 flex flex-wrap justify-center",children:[e.jsx(V,{className:"order-1 sm:order-none cursor-pointer",onClick:()=>k(m-1),disabled:m<=1,children:e.jsx(S,{children:"Previous"})}),e.jsx(X,{className:"order-3 sm:order-none hidden sm:flex cursor-pointer",children:Array.from({length:v},(a,s)=>e.jsx(Z,{className:"sm:mx-1",children:e.jsx(S,{onClick:()=>k(s+1),isActive:m===s+1,children:s+1})},s))}),e.jsx(ee,{className:"order-2 sm:order-none cursor-pointer",onClick:()=>k(m+1),disabled:m>=v,children:e.jsx(S,{children:"Next"})})]})})]})})};export{ge as default};
//# sourceMappingURL=Blog-BXO2HEHb.js.map
