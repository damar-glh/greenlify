import{r as t,u as q,j as a,a0 as z,a1 as G,T as r,B as l,a8 as R,a3 as v,a4 as C,a5 as T,k as p,l as u,m as j,n as f,I as w}from"./index-Bjp6i5Kc.js";import{C as J,b as U}from"./card-Dd2CSfRw.js";import{T as V,a as Q,b as D,c as d,d as W,e as o}from"./table-CMYNHUyL.js";import{B as X,a as Y,b as N,c as K,d as B,e as Z}from"./breadcrumb-DETTni7P.js";import{L as S}from"./label-BMYCyKBQ.js";import{g as $,a as aa,u as ea,d as sa}from"./categoryManagement-BC6HiMdt.js";import{u as ta}from"./useDateStore-KkonUMz-.js";import{P as ra}from"./plus-DCjz8vl6.js";import{P as la}from"./pencil-CAjUoBxd.js";import{T as ia}from"./trash-2-NJB4vD0_.js";function ja(){const[M,P]=t.useState([]),[E,b]=t.useState(!0),[O,m]=t.useState(!1),[A,x]=t.useState(!1),[I,n]=t.useState(!1),[i,k]=t.useState(null),{formatDate:H}=ta(),{toast:s}=q(),c=async()=>{try{b(!0);const e=await $();P(e)}catch(e){s({title:"Error",description:e.message,variant:"destructive"})}finally{b(!1)}},L=async e=>{e.preventDefault();const g={category_name:new FormData(e.target).get("categoryName"),status:"Aktif"};try{await aa(g),s({title:"Berhasil",description:"Kategori baru telah ditambahkan"}),m(!1),await c(),e.target.reset()}catch{s({title:"Produk Gagal Ditambahkan",description:"Produk yang anda tambahkan sudah ada.",variant:"destructive"})}},_=async e=>{e.preventDefault();const g={category_name:new FormData(e.target).get("categoryName"),status:i.status};try{await ea(i.id,g),s({title:"Berhasil",description:"Kategori telah diperbarui."}),x(!1),await c()}catch(y){s({title:"Terjadi Kesalahan",description:y.message,variant:"destructive"})}},F=async e=>{try{await sa(e),n(!1),s({title:"Berhasil",description:"Kategori telah dihapus"}),await c()}catch(h){s({title:"Terjadi Kesaahan",description:h.message,variant:"destructive"})}};return t.useEffect(()=>{c().catch(e=>{console.error("Gagal mengambil data categori",e)})},[]),a.jsxs(a.Fragment,{children:[a.jsx("header",{className:"flex h-16 shrink-0 items-center gap-2",children:a.jsxs("div",{className:"flex items-center gap-2 px-4",children:[a.jsx(z,{className:"-ml-1"}),a.jsx(G,{orientation:"vertical",className:"mr-2 h-4"}),a.jsx(X,{children:a.jsxs(Y,{children:[a.jsx(N,{className:"hidden md:block",children:a.jsx(K,{href:"/",className:"text-[16px] font-normal leading-[28px]",children:"Beranda"})}),a.jsx(B,{className:"hidden md:block"}),a.jsx(N,{children:a.jsx(K,{href:"/Dashboard",className:"text-[16px] font-normal leading-[28px]",children:"Dashboard"})}),a.jsx(B,{className:"hidden md:block"}),a.jsx(N,{children:a.jsx(Z,{className:"text-[16px] font-normal leading-[28px]",children:"Kategori"})})]})})]})}),a.jsxs("div",{className:"flex flex-1 flex-col gap-4 p-4 pt-0",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 mr-0 md:mr-6",children:[a.jsxs("div",{children:[a.jsx(r,{variant:"h1",className:"text-4xl lg:text-5xl",children:"Manajemen Kategori"}),a.jsx(r,{variant:"p",className:"text-slate-700 mt-4",children:"Kelola kategori produk untuk memudahkan pengorganisasian dan pencarian produk di toko Anda."})]}),a.jsxs(l,{variant:"primary",className:"text-white shadow-lg",onClick:()=>m(!0),children:[a.jsx(ra,{className:"w-6 h-6 mr-2"}),"Tambah Kategori"]})]}),a.jsx("div",{className:"grid gap-4 grid-cols-1",children:a.jsx(J,{children:a.jsx(U,{className:"p-0 md:p-6",children:E?a.jsx("div",{className:"text-center py-4",children:"Memuat data..."}):a.jsxs(V,{children:[a.jsx(Q,{children:a.jsxs(D,{children:[a.jsx(d,{className:"text-xl text-center",children:"Nama Kategori"}),a.jsx(d,{className:"text-xl text-center",children:"Jumlah Produk"}),a.jsx(d,{className:"text-xl text-center",children:"Tanggal Dibuat"}),a.jsx(d,{className:"text-xl text-right",children:"Aksi"})]})}),a.jsx(W,{children:M.map(e=>a.jsxs(D,{children:[a.jsx(o,{className:"text-center",children:e.category_name}),a.jsxs(o,{className:"text-center",children:[e.product_count," Produk"]}),a.jsx(o,{className:"text-center",children:H(e.created_at)}),a.jsx(o,{className:"text-right",children:a.jsx(R,{children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsxs(v,{children:[a.jsx(C,{asChild:!0,children:a.jsx(l,{variant:"outline",size:"icon",onClick:()=>{k(e),x(!0)},children:a.jsx(la,{className:"w-4 h-4"})})}),a.jsx(T,{className:"bg-emerald-600",children:a.jsx(r,{variant:"p",className:"text-background",children:"Edit Kategori"})})]}),a.jsxs(v,{children:[a.jsx(C,{asChild:!0,children:a.jsx(l,{variant:"outline",size:"icon",className:"text-red-500 hover:text-red-600",onClick:()=>{k(e),n(!0)},children:a.jsx(ia,{className:"w-4 h-4"})})}),a.jsx(T,{className:"bg-emerald-600",children:a.jsx(r,{variant:"p",className:"text-background",children:"Hapus Kategori"})})]})]})})})]},e.id))})]})})})})]}),a.jsx(p,{open:O,onOpenChange:m,children:a.jsxs(u,{children:[a.jsxs(j,{className:"space-y-4",children:[a.jsx(f,{className:"text-center text-[30px] font-bold leading-[36px]",children:"Tambah Kategori Baru"}),a.jsx(r,{variant:"p",className:"text-left max-w-lg text-slate-500",children:"Tambahkan kategori baru untuk memudahkan pengorganisasian produk. Kategori baru akan muncul di halaman produk."})]}),a.jsxs("form",{onSubmit:L,className:"space-y-4",children:[a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx(S,{htmlFor:"categoryName",className:"text-[18px] font-bold text-emerald-600",children:"Nama Kategori"}),a.jsx(w,{id:"categoryName",name:"categoryName",required:!0,placeholder:"Masukkan nama kategori",className:"h-12 text-slate-900 border border-slate-50 focus:border-slate-100"})]}),a.jsx(l,{type:"submit",className:"w-full",children:"Simpan"})]})]})}),a.jsx(p,{open:A,onOpenChange:x,children:a.jsxs(u,{children:[a.jsxs(j,{className:"space-y-4",children:[a.jsx(f,{className:"text-center text-[30px] font-bold leading-[36px]",children:"Edit Kategori"}),a.jsx(r,{variant:"p",className:"text-left max-w-lg text-slate-500",children:"Ubah nama kategori untuk memperbarui informasi kategori produk. Perubahan akan muncul di halaman produk."})]}),a.jsxs("form",{onSubmit:_,className:"space-y-4",children:[a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx(S,{htmlFor:"categoryName",className:"text-[18px] font-bold text-emerald-600",children:"Nama Kategori"}),a.jsx(w,{id:"categoryName",name:"categoryName",required:!0,defaultValue:(i==null?void 0:i.category_name)||"",placeholder:"Masukkan nama kategori",className:"h-12 text-slate-900 border border-slate-50 focus:border-slate-100"})]}),a.jsx(l,{type:"submit",className:"w-full",children:"Simpan Perubahan"})]})]})}),a.jsx(p,{open:I,onOpenChange:n,children:a.jsxs(u,{children:[a.jsxs(j,{className:"space-y-4",children:[a.jsx(f,{className:"text-left text-[30px] font-bold leading-[36px]",children:"Hapus Kategori"}),a.jsx(r,{variant:"p",className:"text-left max-w-lg text-slate-500",children:"Apakah Anda yakin ingin menghapus kategori ini? Kategori yang dihapus tidak dapat dikembalikan."})]}),a.jsxs("div",{className:"flex justify-end gap-4",children:[a.jsx(l,{variant:"secondary",onClick:()=>n(!1),children:"Batal"}),a.jsx(l,{variant:"destructive",onClick:()=>F(i.id),children:"Hapus"})]})]})})]})}export{ja as default};
//# sourceMappingURL=DashboardCategory-BOwx-m3X.js.map
