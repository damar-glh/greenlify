import{c as E,q as B,$ as M,r as c,u as O,j as a,a0 as $,a1 as z,T as i,a2 as F,a3 as G,a4 as U,B as k,a5 as K,k as Z,l as J,m as W,n as Y,a6 as Q,a7 as V}from"./index-Bjp6i5Kc.js";import{C as u,a as g,e as y,b as N}from"./card-Dd2CSfRw.js";import{T as X,a as aa,b as T,c as h,d as ea,e as o}from"./table-CMYNHUyL.js";import{B as sa}from"./badge-CKwAAYzL.js";import{B as ta,a as ra,b as D,c as ia,d as na,e as la}from"./breadcrumb-DETTni7P.js";import{P as ca,c as oa,d as b,a as da,b as xa,e as ha}from"./pagination-DvMurIFt.js";import{u as ma}from"./useDateStore-KkonUMz-.js";import{S as pa}from"./scan-line-eESupV0G.js";import{T as ja}from"./trash-2-NJB4vD0_.js";/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=E("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]),ga=async(d,n)=>{try{return(await B.get(M,{params:{start:d,limit:n},headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`}})).data.data}catch(m){throw m}},ya=async d=>{try{return(await B.delete(`${M}/${d}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`}})).data}catch(n){throw console.error(n),n}};function Ca(){const{formatDate:d}=ma(),[n,m]=c.useState([]),[H,P]=c.useState(0),[v,_]=c.useState(0),[I,R]=c.useState(0),[s,p]=c.useState({start:1,limit:7,totalData:0,next:null,previous:null}),[L,w]=c.useState(null),[S,j]=c.useState(!1),{toast:f}=O(),A=async(e=1,r=5)=>{try{const t=await ga(e,r),x=t.results.map(l=>({id:l.id,time:d(l.timestamp),hours:new Date(l.timestamp).toLocaleTimeString(),trashType:l.waste_type.charAt(0).toUpperCase()+l.waste_type.slice(1),accuracy:(l.accuracy*100).toFixed(2)}));P(t.rerata_accuracy),_(t.total_product),R(t.total_scan),m(x),p({start:t.start_index,limit:t.per_page,totalData:t.total_data,next:t.next,previous:t.previous})}catch{f({title:"Gagal Memuat Riwayat",description:"Terjadi kesalahan saat memuat riwayat.",variant:"destructive"})}},q=async e=>{if(e)try{await ya(e);const r=s.totalData-1,t=Math.ceil(r/s.limit);Math.ceil(s.start/s.limit)>t&&t>0?p(x=>({...x,start:(t-1)*s.limit+1})):await A(s.start,s.limit),j(!1),w(null),f({title:"Riwayat Berhasil Dihapus",description:"Riwayat scan telah berhasil dihapus."})}catch(r){console.error(r),f({title:"Gagal Menghapus Riwayat",description:"Terjadi kesalahan saat menghapus riwayat.",variant:"destructive"})}};c.useEffect(()=>{A(s.start,s.limit).then(e=>e)},[s.start]);const C=e=>{if(e){const r=new URLSearchParams(new URL(e).search),t=parseInt(r.get("start"),10),x=parseInt(r.get("limit"),10);p(l=>({...l,start:t,limit:x}))}};return a.jsxs(a.Fragment,{children:[a.jsx("header",{className:"flex h-16 shrink-0 historys-center gap-2",children:a.jsxs("div",{className:"flex historys-center gap-2 px-4",children:[a.jsx($,{className:"-ml-1"}),a.jsx(z,{orientation:"vertical",className:"mr-2 h-4"}),a.jsx(ta,{children:a.jsxs(ra,{children:[a.jsx(D,{className:"hidden md:block",children:a.jsx(ia,{href:"/",className:"text-[16px] font-normal leading-[28px]",children:"Beranda"})}),a.jsx(na,{className:"hidden md:block"}),a.jsx(D,{children:a.jsx(la,{className:"text-[16px] font-normal leading-[28px]",children:"Dashboard"})})]})})]})}),a.jsxs("div",{className:"flex flex-1 flex-col gap-4 p-4 pt-0",children:[a.jsx(i,{variant:"h1",className:"text-4xl lg:text-5xl",children:"Dashboard"}),a.jsx(i,{variant:"p",className:"text-slate-700",children:"Berikut adalah data tentang penggunaan aplikasi dan performa AI yang dapat membantu Anda dalam mengambil keputusan."}),a.jsxs("div",{className:"grid auto-rows-min gap-4 md:grid-cols-3",children:[a.jsxs(u,{children:[a.jsxs(g,{className:"flex flex-row historys-center justify-between space-y-0 pb-2",children:[a.jsx(y,{className:"text-2xl",children:"Total Scan Hari Ini"}),a.jsx(pa,{className:"h-6 w-6"})]}),a.jsxs(N,{className:"flex flex-col gap-2",children:[a.jsx(i,{variant:"h2",children:I}),a.jsx(i,{variant:"p",children:"Scan hari ini"})]})]}),a.jsxs(u,{children:[a.jsxs(g,{className:"flex flex-row historys-center justify-between space-y-0 pb-2",children:[a.jsx(y,{className:"text-2xl",children:"Total Produk"}),a.jsx(F,{className:"h-6 w-6"})]}),a.jsxs(N,{className:"flex flex-col gap-2",children:[a.jsx(i,{variant:"h2",children:v}),a.jsxs(i,{variant:"p",children:["+",v," merchant baru"]})]})]}),a.jsxs(u,{children:[a.jsxs(g,{className:"flex flex-row historys-center justify-between space-y-0 pb-2",children:[a.jsx(y,{className:"text-2xl",children:"Akurasi Model AI"}),a.jsx(ua,{className:"h-6 w-6"})]}),a.jsxs(N,{className:"flex flex-col gap-2",children:[a.jsx(i,{variant:"h2",children:H}),a.jsx(i,{variant:"p",children:"Rata-rata akurasi model AI"})]})]})]}),a.jsx("div",{className:"grid gap-4 grid-cols-1",children:a.jsxs(u,{children:[a.jsxs(g,{className:"p-0 mb-4",children:[a.jsx(y,{className:"text-3xl",children:"Riwayat Scan Terakhir"}),a.jsx(i,{variant:"p",className:"text-emerald-700",children:"Riwayat scan terakhir yang dilakukan oleh pengguna beserta rekomendasi dan akurasi AI."})]}),a.jsx(N,{className:"p-0 md:p-6",children:a.jsxs(X,{children:[a.jsx(aa,{children:a.jsxs(T,{children:[a.jsx(h,{className:"text-xl text-center",children:"Waktu"}),a.jsx(h,{className:"text-xl text-center",children:"Tanggal"}),a.jsx(h,{className:"text-xl text-center",children:"Jenis Sampah"}),a.jsx(h,{className:"text-xl text-center",children:"Akurasi"}),a.jsx(h,{className:"text-xl text-right",children:"Aksi"})]})}),a.jsx(ea,{children:n.length>0?n.map((e,r)=>a.jsxs(T,{children:[a.jsx(o,{className:"text-center",children:e.hours}),a.jsx(o,{className:"text-center",children:e.time}),a.jsx(o,{className:"text-center",children:e.trashType}),a.jsx(o,{className:"text-center",children:a.jsxs(sa,{variant:"success",className:"shadow-md",children:[e.accuracy,"%"]})}),a.jsx(o,{className:"text-right",children:a.jsxs(G,{children:[a.jsx(U,{asChild:!0,children:a.jsx(k,{variant:"outline",size:"icon",className:"text-red-500 hover:text-red-600",onClick:()=>{w(e.id),j(!0)},children:a.jsx(ja,{className:"w-4 h-4"})})}),a.jsx(K,{className:"bg-emerald-600",children:a.jsx(i,{variant:"p",className:"text-background",children:"Hapus Kategori"})})]})})]},r)):a.jsx(T,{children:a.jsx(o,{colSpan:5,className:"text-center text-muted-foreground",children:"Tidak ada data yang tersedia."})})})]})})]})}),s.totalData>s.limit&&a.jsx("div",{className:"mb-8",children:a.jsx(ca,{children:a.jsxs(oa,{children:[a.jsx(b,{children:a.jsx(da,{onClick:()=>C(s.previous),className:s.previous?"cursor-pointer":"pointer-events-none opacity-50"})}),Array.from({length:Math.ceil(s.totalData/s.limit)},(e,r)=>r+1).map(e=>a.jsx(b,{children:a.jsx(xa,{className:"cursor-pointer",onClick:()=>{const r=(e-1)*s.limit+1;p(t=>({...t,start:r}))},isActive:e===Math.ceil(s.start/s.limit),children:e})},e)),a.jsx(b,{children:a.jsx(ha,{onClick:()=>C(s.next),className:s.next?"cursor-pointer":"pointer-events-none opacity-50"})})]})})})]}),S&&a.jsx(Z,{open:S,onOpenChange:j,children:a.jsxs(J,{children:[a.jsxs(W,{children:[a.jsx(Y,{children:"Konfirmasi Hapus"}),a.jsx(Q,{children:"Apakah Anda yakin ingin menghapus riwayat ini? Tindakan ini tidak dapat dibatalkan."})]}),a.jsxs(V,{children:[a.jsx(k,{variant:"secondary",onClick:()=>j(!1),children:"Batal"}),a.jsx(k,{variant:"destructive",onClick:()=>{q(L).catch(e=>console.error(e))},children:"Hapus"})]})]})})]})}export{Ca as default};
//# sourceMappingURL=DashboardHome-D4eFCoRr.js.map
