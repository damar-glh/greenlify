import{c as K,t as T,r as m,V as G,x as q,j as e,P as _,E as I,F as z,W as V,X,G as S,Y as $,q as W,Z as Y,R as p,M as Z,B as L,_ as J,T as w,I as P}from"./index-Bjp6i5Kc.js";import{C as Q,b as U}from"./card-Dd2CSfRw.js";import{L as R}from"./label-BMYCyKBQ.js";import{A as ee}from"./arrow-left-CcRl1kP4.js";import{E as te}from"./eye-BU17jcJU.js";/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=K("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var N="Checkbox",[se,xe]=T(N),[re,oe]=se(N),M=m.forwardRef((a,s)=>{const{__scopeCheckbox:t,name:r,checked:o,defaultChecked:n,required:u,disabled:l,value:x="on",onCheckedChange:g,form:h,...v}=a,[c,b]=m.useState(null),i=G(s,d=>b(d)),j=m.useRef(!1),E=c?h||!!c.closest("form"):!0,[k=!1,C]=q({prop:o,defaultProp:n,onChange:g}),H=m.useRef(k);return m.useEffect(()=>{const d=c==null?void 0:c.form;if(d){const y=()=>C(H.current);return d.addEventListener("reset",y),()=>d.removeEventListener("reset",y)}},[c,C]),e.jsxs(re,{scope:t,state:k,disabled:l,children:[e.jsx(_.button,{type:"button",role:"checkbox","aria-checked":f(k)?"mixed":k,"aria-required":u,"data-state":D(k),"data-disabled":l?"":void 0,disabled:l,value:x,...v,ref:i,onKeyDown:I(a.onKeyDown,d=>{d.key==="Enter"&&d.preventDefault()}),onClick:I(a.onClick,d=>{C(y=>f(y)?!0:!y),E&&(j.current=d.isPropagationStopped(),j.current||d.stopPropagation())})}),E&&e.jsx(ne,{control:c,bubbles:!j.current,name:r,value:x,checked:k,required:u,disabled:l,form:h,style:{transform:"translateX(-100%)"},defaultChecked:f(n)?!1:n})]})});M.displayName=N;var A="CheckboxIndicator",B=m.forwardRef((a,s)=>{const{__scopeCheckbox:t,forceMount:r,...o}=a,n=oe(A,t);return e.jsx(z,{present:r||f(n.state)||n.state===!0,children:e.jsx(_.span,{"data-state":D(n.state),"data-disabled":n.disabled?"":void 0,...o,ref:s,style:{pointerEvents:"none",...a.style}})})});B.displayName=A;var ne=a=>{const{control:s,checked:t,bubbles:r=!0,defaultChecked:o,...n}=a,u=m.useRef(null),l=V(t),x=X(s);m.useEffect(()=>{const h=u.current,v=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(v,"checked").set;if(l!==t&&b){const i=new Event("click",{bubbles:r});h.indeterminate=f(t),b.call(h,f(t)?!1:t),h.dispatchEvent(i)}},[l,t,r]);const g=m.useRef(f(t)?!1:t);return e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:o??g.current,...n,tabIndex:-1,ref:u,style:{...a.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function f(a){return a==="indeterminate"}function D(a){return f(a)?"indeterminate":a?"checked":"unchecked"}var F=M,le=B;const O=m.forwardRef(({className:a,checked:s,onCheckedChange:t,...r},o)=>e.jsx(F,{ref:o,checked:s,onCheckedChange:t,className:S("peer h-8 w-8 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...r,children:e.jsx(le,{className:S("flex items-center justify-center text-current"),children:e.jsx($,{className:"h-8 w-8 text-white"})})}));O.displayName=F.displayName;const ce="/greenlify/assets/img-login-DI7t_hKD.svg";class ie{static validateLoginInputs(s,t,r){if(!s||!t)throw new Error("Email dan password harus diisi.");if(typeof r!="boolean")throw new Error("Remember me harus berupa boolean.");if(!this.isValidEmail(s))throw new Error("Format email tidak valid.")}static isValidEmail(s){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)}static async login(s,t,r){try{this.validateLoginInputs(s,t,r);const o=!!r,n=await W.post(Y,{email:s,password:t,remember_me:o},{headers:{"Content-Type":"application/json"},timeout:1e4}),{access_token:u,refresh_token:l}=n.data.data;return localStorage.setItem("access_token",u),localStorage.setItem("refresh_token",l),n.data}catch{throw new Error("Login gagal. Periksa kembali kredensial Anda.")}}static logout(){localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")}}function pe(){const[a,s]=p.useState(""),[t,r]=p.useState(""),[o,n]=p.useState(!1),[u,l]=p.useState(""),[x,g]=p.useState(!1),[h,v]=p.useState(!1),c=Z(),b=async i=>{i.preventDefault(),l(""),g(!0);try{await ie.login(a,t,h),c("/dashboard")}catch{l("Login gagal. Periksa email dan password Anda.")}finally{g(!1)}};return p.useEffect(()=>{document.getElementById("email").focus()},[]),m.useEffect(()=>{localStorage.getItem("access_token")&&c("/dashboard")},[]),e.jsx("div",{className:"w-full h-screen",children:e.jsxs("div",{className:"flex items-stretch w-full h-full",children:[e.jsx("div",{className:"hidden relative lg:flex lg:w-10/12 p-12",children:e.jsx("img",{src:ce,alt:"GreenLify Logo",className:"absolute inset-0 w-full h-full object-cover",loading:"lazy"})}),e.jsx("div",{className:"flex items-center justify-center w-full lg:w-1/2 p-6",children:e.jsxs(Q,{className:"w-full max-w-xl",children:[e.jsx("div",{className:"w-full flex gap-3 items-center mb-[66px]",children:e.jsx(L,{variant:"icon",className:"bg-emerald-500 hover:bg-emerald-600 shadow-lg",onClick:()=>c("/"),children:e.jsx(ee,{className:"h-4 w-4 text-background"})})}),e.jsxs(U,{className:"space-y-8 p-8",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsx("img",{src:J,alt:"GreenLify Logo",className:"w-34 mx-auto"}),e.jsx(w,{variant:"h1",className:" text-center text-emerald-600",children:"Admin Login"}),e.jsx(w,{variant:"p",className:"text-center",children:"pengelolaan sampah dengan deteksi menggunakan teknologi AI dan promosi produk ramah lingkungan"})]}),e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(R,{htmlFor:"email",className:"text-[18px] font-bold text-emerald-600",children:"Email"}),e.jsx(P,{id:"email",type:"email",placeholder:"admin@gmail.com",className:"h-12 text-slate-900 border border-slate-50 focus:border-slate-100",value:a,onChange:i=>s(i.target.value)})]}),e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsx(R,{htmlFor:"password",className:"text-[18px] font-bold text-emerald-600",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{id:"password",type:o?"text":"password",placeholder:"Enter your password",className:"h-12 text-slate-900 border border-slate-50 focus:border-slate-100",value:t,onChange:i=>r(i.target.value)}),e.jsx("button",{type:"button",onClick:()=>n(!o),"aria-label":o?"Hide password":"Show password",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-sm leading-5",children:o?e.jsx(ae,{className:"text-emerald-500"}):e.jsx(te,{className:"text-emerald-500"})})]})]}),u&&e.jsx(w,{variant:"small",className:"text-center text-red-500 mt-2",children:u}),e.jsxs("div",{className:"flex items-center space-x-4 my-4",children:[e.jsx(O,{id:"remember",className:"bg-emerald-500",checked:h,onCheckedChange:i=>v(!!i)}),e.jsx(w,{variant:"small",className:"text-gray-500",children:e.jsx("label",{htmlFor:"remember",className:"text-[14px] font-bold",children:"Biarkan saya tetap masuk"})})]}),e.jsx(L,{type:"submit",className:"w-full bg-emerald-500 hover:bg-emerald-600",disabled:x||!a||!t,children:x?e.jsxs(e.Fragment,{children:["Memuat...",e.jsx("span",{className:"loader inline-block ml-2"})]}):"Masuk"})]}),e.jsxs(w,{variant:"p",className:"text-center",children:["Kesulitan, Perlu bantuan?"," ",e.jsx("a",{href:"/tentangkami",className:"text-emerald-600 hover:underline",children:"Hubungi kami"})]})]})]})})]})})}export{pe as default};
//# sourceMappingURL=Login-t8ZyZA0-.js.map
