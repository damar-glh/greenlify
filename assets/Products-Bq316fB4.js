import{j as e,T as i,B as y,S as u,r,M as ae,N as se,g as F,I as te,L as re}from"./index-Bjp6i5Kc.js";import{g as le}from"./product-BSlvaYwe.js";import{C as O,a as U,b as M,c as z,d as V}from"./card-Dd2CSfRw.js";import{b as Q}from"./index-Cz0sGFKe.js";import{B as ne}from"./badge-CKwAAYzL.js";import{S as D,a as A,b as B,c as H,d as v,F as ce}from"./select-CvTnstrL.js";import{P as ie,a as oe,b as P,c as de,d as me,e as ue}from"./pagination-DvMurIFt.js";import{a as xe}from"./debounce-DpNeegT9.js";import"./isObject-BLak1Aog.js";const he=({category_name:o,contact:d,img_file:x,price:f,title:l,description:j})=>e.jsxs(O,{className:"flex flex-col h-full",children:[e.jsx("div",{className:"rounded-md overflow-hidden",children:e.jsx(Q.LazyLoadImage,{src:x,alt:l,className:"w-full h-96 object-cover"})}),e.jsxs(U,{className:"space-y-4 flex-grow",children:[e.jsx(ne,{variant:"default",className:"bg-emerald-500 text-white max-w-max px-2 py-1 rounded-full",children:o}),e.jsx(i,{variant:"h2",className:"text-emerald-600 font-bold",children:l}),e.jsxs(i,{variant:"large",className:"text-emerald-600 font-semibold",children:["Rp. ",f]})]}),e.jsx(M,{className:"flex-grow",children:e.jsx(z,{children:e.jsx(i,{variant:"p",type:"description",className:"text-justify",children:j.split(".").slice(0,1).join(".")+"."})})}),e.jsx(V,{className:"mt-auto",children:e.jsx("a",{href:d,target:"_blank",rel:"noopener noreferrer",onClick:N=>N.stopPropagation(),className:"w-full",children:e.jsx(y,{variant:"outline",className:"px-4 py-2 w-full shadow-lg",children:"Hubungi"})})})]});function pe(){return e.jsxs(O,{className:"w-full",children:[e.jsx("div",{className:"rounded-md overflow-hidden",children:e.jsx(u,{className:"w-full h-96 object-cover"})}),e.jsxs(U,{className:"space-y-4",children:[e.jsx(u,{className:"h-8 w-48 rounded-md"}),e.jsx(u,{className:"h-6 w-32 rounded-md"})]}),e.jsx(M,{children:e.jsxs(z,{children:[e.jsx(u,{className:"h-4 w-full mb-2 rounded-md"}),e.jsx(u,{className:"h-4 w-5/6 rounded-md"})]})}),e.jsx(V,{children:e.jsx(u,{className:"h-10 w-full rounded-md"})})]})}function ge({count:o}){return e.jsx(e.Fragment,{children:Array.from({length:o}).map((d,x)=>e.jsx(pe,{},x))})}function Pe(){const o=r.useRef(null),d=r.useRef(null),x=ae(),f=se(),l=new URLSearchParams(f.search),[j,N]=r.useState([]),[K,W]=r.useState([]),[w,C]=r.useState(l.get("keyword")||""),[X,S]=r.useState(l.get("keyword")||""),[t,R]=r.useState(l.get("min_price")?[l.get("min_price"),l.get("max_price")]:null),[m,E]=r.useState(l.get("category_name")||""),[b,k]=r.useState(null),[h,p]=r.useState(parseInt(l.get("page"))||1),[n,$]=r.useState({next:null,previous:null,per_page:8,total_data:0}),[G,L]=r.useState(!0);r.useEffect(()=>{async function a(){try{L(!0),k(null),N([]);const s={keyword:w||null,category_name:m||null,min_price:t?t[0]:null,max_price:t?t[1]:null,page:h,limit:n.per_page},c=await le(s);W(c.categories),N(c.products),$(c.pagination)}catch(s){s.message.includes("No response received from server")?k("ERR_CONNECTION_REFUSED"):k(s.message)}finally{L(!1)}}a().catch(console.error)},[w,m,t,h,n.per_page]),r.useEffect(()=>{o.current&&F.fromTo(o.current.children,{opacity:0,y:20},{opacity:1,y:0,duration:1,stagger:.5}),d.current&&F.fromTo(d.current,{opacity:0,y:20},{opacity:1,y:0,duration:.6})},[j,b]);const g=a=>{const s=new URLSearchParams(f.search);Object.keys(a).forEach(c=>{a[c]?s.set(c,a[c]):s.delete(c)}),x({search:s.toString()})},J=r.useCallback(xe(a=>{const s=a?{keyword:a,category_name:m||null,min_price:t?t[0]:null,max_price:t?t[1]:null,page:1}:{keyword:null,category_name:null,min_price:null,max_price:null,page:1};C(a||""),p(1),g(s)},500),[m,t]),I=a=>{const s=a.target.value;S(s),J(s)},Y=a=>{const s={category_name:a,keyword:w||null,min_price:t?t[0]:null,max_price:t?t[1]:null,page:1};E(a),p(1),g(s)},Z=a=>{const s=a.split(",").map(Number),c={min_price:s[0],max_price:s[1],category_name:m||null,keyword:w||null,page:1};R(s),p(1),g(c)},_=a=>{a>=1&&a<=Math.ceil(n.total_data/n.per_page)&&(p(a),g({...l,page:a.toString()}))};function T(){const a={category_name:null,keyword:null,min_price:null,max_price:null,page:1};E(""),C(""),S(""),R(null),p(1),g(a)}const q=()=>G?e.jsx("div",{className:"col-span-full flex flex-col items-center justify-center w-full p-8",ref:d,children:e.jsx(i,{variant:"h2",className:"text-emerald-600 text-center mb-4",children:"Memuat Produk..."})}):b?b==="ERR_CONNECTION_REFUSED"?e.jsx(ge,{count:8}):e.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center w-full p-8",ref:d,children:[e.jsx(i,{variant:"h2",className:"text-emerald-600 text-center mb-4",children:"Produk Tidak Ditemukan"}),e.jsx(i,{variant:"large",className:"text-slate-500 text-center mb-6",children:"Tidak ada produk yang sesuai dengan filter atau pencarian Anda."}),e.jsx(y,{onClick:T,variant:"primary",children:"Hapus Filter"})]}):j.map(a=>e.jsx("div",{ref:o,children:e.jsx(re,{to:`/produk/${a.id}`,children:e.jsx(he,{img_file:a.img_file,price:a.price,title:a.product_name,description:a.description,contact:a.contact,category_name:a.category_name})})},a.id)),ee=Math.ceil(n.total_data/n.per_page);return e.jsx("div",{children:e.jsxs("div",{className:"w-full mt-[99px] h-auto flex flex-col items-center gap-[33px]",children:[e.jsxs("div",{className:"relative w-10/12 mx-4 md:mx-0",children:[e.jsx(Q.LazyLoadImage,{src:"https://images.pexels.com/photos/3737672/pexels-photo-3737672.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",alt:"Home",className:"w-full h-[481px] object-cover rounded-[20px] shadow-lg"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-90 rounded-[20px]"}),e.jsx("div",{className:"absolute inset-0 z-10 flex flex-col gap-6 items-center justify-center",children:e.jsx(i,{variant:"title",className:"text-white text-4xl md:text-5xl lg:text-6xl font-bold text-center",children:"Produk Ramah Lingkungan"})})]}),e.jsx("div",{className:"w-full mt-[33px] h-auto flex flex-col items-center",children:e.jsxs("div",{className:"text-center px-4",children:[e.jsxs(i,{variant:"h1",children:["Produk ",e.jsx("strong",{className:"text-emerald-600",children:"Inovatif"})]}),e.jsx(i,{variant:"p",className:"mt-7 max-w-6xl",type:"description",children:"Produk inovatif kami dirancang untuk mendukung keberlanjutan dan menciptakan masa depan yang lebih hijau, dengan solusi ramah lingkungan yang membantu mengurangi dampak negatif terhadap bumi. Produk kami terbuat dari bahan-bahan yang ramah lingkungan dan dapat di daur ulang."})]})}),e.jsx("div",{className:"w-full h-auto mt-[33px] flex flex-col items-center",children:e.jsxs("div",{className:"w-11/12 md:w-10/12 flex flex-col md:flex-row justify-between items-center",children:[e.jsxs("div",{className:"flex w-full md:w-full max-w-2xl items-center space-x-2",children:[e.jsxs(D,{value:t?t.join(","):"",onValueChange:Z,children:[e.jsx(A,{className:"w-full md:w-[180px] h-11 bg-emerald-500 text-white",children:e.jsx(B,{placeholder:"Rentang Harga",className:"text-white"})}),e.jsxs(H,{className:"bg-emerald-500 text-white",children:[e.jsx(v,{value:"0,10000",className:"text-white",children:"Di Bawah 10000"}),e.jsx(v,{value:"10000,50000",className:"text-white",children:"10000 - 50000"}),e.jsx(v,{value:"50000,1000000",className:"text-white",children:"Di Atas 50000"})]})]}),e.jsxs(D,{value:m,onValueChange:Y,children:[e.jsx(A,{className:"w-full md:w-[180px] h-11 bg-emerald-500 text-white",children:e.jsx(B,{placeholder:"Kategori",className:"text-white"})}),e.jsx(H,{className:"bg-emerald-500 text-white",children:K.map(a=>e.jsx(v,{value:a,className:"text-white hover:bg-emerald-700",children:a},a))})]}),e.jsx(y,{onClick:T,variant:"icon",className:"bg-emerald-500 hover:bg-emerald-600 text-background",children:e.jsx(ce,{})})]}),e.jsxs("div",{className:"flex w-full md:w-full max-w-2xl items-center space-x-2 mt-4 md:mt-0",children:[e.jsx(te,{type:"text",placeholder:"Cari produk...",value:X,onChange:I,className:"h-10 text-emerald-600 border-2 border-emerald-500 w-full"}),e.jsx(y,{variant:"primary",className:"h-10",onClick:I,children:"Cari"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-5 w-10/12 mt-[33px] justify-center items-stretch",children:q()}),n.total_data>n.per_page&&e.jsx("div",{className:"w-10/12 mt-8 sm:mt-[33px]",children:e.jsxs(ie,{className:"gap-5 flex flex-wrap justify-center",children:[e.jsx(oe,{className:"order-1 sm:order-none cursor-pointer",onClick:()=>_(h-1),"aria-disabled":!n.previous,children:e.jsx(P,{children:"Previous"})}),e.jsx(de,{className:"order-3 sm:order-none hidden sm:flex cursor-pointer",children:[...Array(ee)].map((a,s)=>e.jsx(me,{className:"sm:mx-1",children:e.jsx(P,{onClick:()=>_(s+1),isActive:h===s+1,children:s+1})},s))}),e.jsx(ue,{className:"order-2 sm:order-none cursor-pointer",onClick:()=>_(h+1),disabled:!n.next,children:e.jsx(P,{children:"Next"})})]})})]})})}export{Pe as default};
//# sourceMappingURL=Products-Bq316fB4.js.map
